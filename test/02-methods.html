<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script src="../src/array/methods/map.js"></script>
  <script src="../src/array/methods/reduce.js"></script>
  <script src="../src/array/methods/filter.js"></script>
  <script src="../src/array/methods/find.js"></script>
  <script src="../src/array/methods/findIndex.js"></script>
  <script src="../src/array/methods/every.js"></script>
  <script src="../src/array/methods/some.js"></script>

  <script>

    /* 
      map
    */
    let arr = [1, 2, 3]
    let arr2 = [1, 2, 4]
    // console.log(arr.map(i => i + 1))
    // console.log(arr.myMap(i => i + 1))
    // console.log(map(arr, i => i + 1))
    // console.log(["1", "2", "3"].map(parseInt))
    // console.log(["1", "2", "3"].myMap(parseInt))
    // console.log([,,3].forEach())
    var maxCallback2 = (max, cur) => Math.max(max, cur);

    /* reduce  */
    // 
    // console.log([]
    //   .reduce(maxCallback2, -Infinity));
    // console.log([1, 2, 2].reduce((accumulator, currentValue) => { console.log(currentValue, accumulator) }))
    // console.log([1, 2].myReduce((accumulator, currentValue, i) => {
    //   console.log(accumulator, currentValue, i)
    //   return accumulator + currentValue
    // },2))
    // 应用
    // 计算重复值
    const subs = ["Chinses", "English", "English", "Chinses", "Math", "Physics", "English", "Chemistry"]
    const subsCount = subs.reduce((prev, cur) => {
      if (cur in prev) {
        prev[cur]++
      } else {
        prev[cur] = 1
      }
      return prev
    }, {})
    // console.log(subsCount)
    // 去重
    const subsRe = subs.reduce((prev, cur, i, arr) => {
      // if (arr.indexOf(cur) === i) {
      //   prev.push(cur)
      // }
      if (!prev.includes(cur)) prev.push(cur)
      return prev
    }, [])
    // console.log(subsRe)

    /* 
      filter

    */
    const resFilter = [2, 1, 3, 4, 5, 6].myFilter(item => {
      // console.log(this)
      return item > 2
    })
    console.log(resFilter)
    // const resMyFilter =

    /* 
      find
    */
    var inventory = [
      { name: 'apples', quantity: 2 },
      { name: 'bananas', quantity: 0 },
      { name: 'cherries', quantity: 5 }
    ];

    function findCherries(fruit) {
      console.log(this)
      return fruit.name === 'cherries';
    }

    // console.log(inventory.myFind(findCherries)); // { name: 'cherries', quantity: 5 }

    /* 
      findIndex

    */
    function isPrime(element, index, array) {
      var start = 2;
      while (start <= Math.sqrt(element)) {
        if (element % start++ < 1) {
          return false;
        }
      }
      return element > 1;
    }

    // console.log([4, 6, 8, 12].myFindIndex(isPrime)); // -1, not found
    // console.log([4, 6, 7, 12].myFindIndex(isPrime)); // 2

    /* 
      every

    */
    function isBigEnough(element, index, array) {
      return element >= 10;
    }
    // console.log([12, 5, 8, 130, 44].every(isBigEnough));   // false
    // console.log([12, 54, 18, 130, 44].every(isBigEnough)); // true
    // console.log([12, 5, 8, 130, 44].myEvery(isBigEnough));   // false
    // console.log([12, 54, 18, 130, 44].myEvery(isBigEnough)); // true
    // console.log([12, 5, 8, 130, 44].myEvery(x => x >= 10)); // true
    // console.log([12, 54, 18, 130, 44].myEvery(x => x >= 10)); // false
    // console.log(typeof Object([12, 54, 18, 130, 44]))
    // console.log(typeof [12, 54, 18, 130, 44])
    // console.log(Array.isArray(Object([12, 54, 18, 130, 44])))
    // let arr111 = [12, 54, 18, 130, 44]
    // for(let i=0;i<arr111.length;i++){
    //   console.log(4 in Object(arr111))
    // }
    function isBiggerThan10(element, index, array) {
      return element > 10;
    }
    console.log([2, 5, 8, 1, 4].some(isBiggerThan10))// false
    console.log([12, 5, 8, 1, 4].some(isBiggerThan10))// true
    console.log([2, 5, 8, 1, 4].mySome(isBiggerThan10))// false
    console.log([12, 5, 8, 1, 4].mySome(isBiggerThan10))// true
    var fruits = ['apple', 'banana', 'mango', 'guava'];

    function checkAvailability(arr, val) {
      return arr.mySome(function (arrVal) {
        return val === arrVal;
      });
    }

    console.log(checkAvailability(fruits, 'kela'));   // false
    console.log(checkAvailability(fruits, 'banana')); // true
    var TRUTHY_VALUES = [true, 'true', 1];

    function getBoolean(value) {
      'use strict';

      if (typeof value === 'string') {
        value = value.toLowerCase().trim();
      }

      return TRUTHY_VALUES.some(function (t) {
        return t === value;
      });
    }

    console.log(getBoolean(false));   // false
    console.log(getBoolean('false')); // false
    console.log(getBoolean(1));       // true
    console.log(getBoolean('true'));  // true
  </script>
</body>

</html>